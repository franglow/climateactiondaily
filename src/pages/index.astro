---
import BaseLayout from "../layouts/BaseLayout.astro";
import CoverCard from "../components/CoverCard.astro";
import BuyButtons from "../components/BuyButtons.astro";

// —— Content (editá con tu copy real) ——
const BOOK_TITLE   = "Climate Change: A Guide to Everyday Action";
const BOOK_SUB     = "Practical Steps for Sustainable Living";
const LONG_DESC    = `What if your personal well-being and the planet's health were intertwined?

This guide invites us to see ourselves not as visitors, but as parts of the Earth itself. When we shift our perspective to one of interconnection, even the smallest actions take on profound meaning.

By blending practical steps with mindful awareness, this guide weaves environmental care with personal growth and offers a clear and achievable path toward habits rooted in gratitude, clarity, and purpose.

Change begins with acknowledging who we are.

We are Earth.`; // tightened
const COVER_URL    = "/images/cover.webp";

const retailers = [
  { name: "Amazon", url: "https://www.amazon.com/dp/XXXXXXX" },
  // add more when ready
];

// single prominent CTA (Amazon) used under the title
const amazonOnly = retailers.filter((r) => String(r.name).toLowerCase().startsWith('amazon'));

const pageTitle = BOOK_TITLE;
const pageDesc  = "A practical guide to sustainable living and personal growth.";
const ogImage   = "/og.jpg";
---

<BaseLayout title={pageTitle} description={pageDesc} ogImage={ogImage} lang="en">
  <section class="grid md:grid-cols-2 gap-8 md:gap-12 items-start pt-10 pb-10 md:pt-20 md:pb-14">
    <!-- Right: cover -->
    <div class="order-1 md:order-2 md:pl-4 md:sticky md:top-28">
      <CoverCard src={COVER_URL} alt={`Cover of ${BOOK_TITLE}`} eager={true} />
    </div>

    <!-- Left: text -->
    <div class="order-2 md:order-1 max-w-prose">
      <h1 class="font-serif text-3xl md:text-4xl leading-tight tracking-tight">
        {BOOK_TITLE}
      </h1>
      <p class="mt-2 text-base md:text-lg font-semibold text-base-ink/90">{BOOK_SUB}</p>

      <!-- Mobile CTA + inline buy buttons (mobile only) -->
      <div class="mt-4 flex flex-col justify-start md:hidden">
        <div>
          <h3 class="text-lg md:text-xl font-semibold leading-tight">
            {`Get Your Copy of ${BOOK_TITLE}`}
          </h3>
          <div class="mt-3">
            <BuyButtons retailers={amazonOnly} />
          </div>
        </div>
      </div>

      <!-- About -->
      <div class="mt-8">
        <h2 class="text-sm font-semibold tracking-wide text-base-subtle">About the book</h2>
        <div class="h-px bg-base-line my-3"></div>

        <!-- If you enable Tailwind Typography, keep prose; otherwise style with utilities -->
        <div class="prose prose-stone max-w-none">
          {LONG_DESC.split('\n\n').map((p, i) => (
            <p class={i === 0 ? 'mt-0' : 'mt-6'}>{p}</p>
          ))}
        </div>
      </div>

      <!-- Desktop CTA -->
      <div class="mt-8 hidden md:flex justify-start">
        <div>
          <h3 class="text-lg md:text-xl font-semibold leading-tight">
            {`Get Your Copy of ${BOOK_TITLE}`}
          </h3>
          <div class="mt-3">
            <BuyButtons retailers={amazonOnly} />
          </div>
        </div>
      </div>
    </div>
  </section>

  
</BaseLayout>